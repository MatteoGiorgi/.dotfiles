#!/usr/bin/env sh

echo "$*" | grep "\.ar\." && {
    swallow alacritty \
        --config-file ~/.config/alacritty/alacritty_ar.yml \
        -e "$EDITOR" "$*" &
    exit
}

echo "$1" | grep "\.sent$" && {
    swallow sent "$1" &
    exit
}

case $(file --mime-type "$*" -bL) in
    text/* | inode/x-empty | application/json | application/octet-stream)
        "$EDITOR" "$*"
        ;;
    video/*)
        pidof mpv || swallow mpv "$*"
        ;;
    application/pdf | application/postscript)
        pidof zathura || swallow zathura "$*"
        ;;
    application/djvu | application/postscript)
        pidof zathura || swallow zathura "$*"
        ;;
    image/gif)
        pgrep sxiv || swallow "sxiv -a" "$*"
        ;;
    image/*)
        pidof sxiv || swallow "sxiv" "$*"
        ;;
esac
